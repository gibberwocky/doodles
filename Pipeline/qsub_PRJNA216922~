# !/bin/bash
# IEKNGHER1ujm

# PRJNA216922 [single-end reads, HiSeq 2000]
# Individual genome sequences for 39 Apis mellifera and 1 Apis cerana

SAMPLES=('SRR957058' 'SRR957059' 'SRR957060' 'SRR957061'
'SRR957062' 'SRR957063' 'SRR957064' 'SRR957065' 'SRR957066' 'SRR957067'
'SRR957068' 'SRR957069' 'SRR957070' 'SRR957071' 'SRR957072' 'SRR957073'
'SRR957074' 'SRR957075' 'SRR957076' 'SRR957077' 'SRR957078' 'SRR957079'
'SRR957080' 'SRR957081' 'SRR957082' 'SRR957083' 'SRR957084' 'SRR957085' 
'SRR957086' 'SRR957087' 'SRR957088' 'SRR957089' 'SRR957090' 'SRR957091'
'SRR957092' 'SRR957093' 'SRR957094' 'SRR957095' 'SRR957096' 'SRR957097')

#				map	stat	snps
#SRR957058	Apis mellifera	/	/	/	[seqapipop]
#SRR957059	Apis mellifera	/	/	/	[seqapipop]
#SRR957060	Apis mellifera	/	/	/	[seqapipop]
#SRR957061	Apis mellifera	/	/	/	[seqapipop]
#SRR957062	Apis mellifera	/	/	/	[seqapipop]
#SRR957063	Apis mellifera	/	/	/	[seqapipop]
#SRR957064	Apis mellifera	/	/	/	[seqapipop]
#SRR957065	Apis mellifera	/	/	/	[seqapipop]
#SRR957066	Apis mellifera	/	/	/	[seqapipop]
#SRR957067	Apis mellifera	/	/	/	[seqapipop]
#SRR957068	Apis mellifera	/	/	/	[seqapipop]
#SRR957069	Apis mellifera	/	/	/	[seqapipop]
#SRR957070	Apis mellifera  /	/	/	[seqapipop]
#SRR957071	Apis mellifera  /	/	/	[seqapipop]
#SRR957072	Apis mellifera 	/	/	/	[seqapipop]
#SRR957073	Apis mellifera 	/	/	/	[seqapipop]
#SRR957074	Apis mellifera 	/	/	/	[seqapipop]
#SRR957075	Apis mellifera 	/	/	/	[seqapipop]
#SRR957076	Apis mellifera 	/	/	/	[seqapipop]
#SRR957077	Apis mellifera 	/	/	/	[seqapipop]
#SRR957078	Apis mellifera	/	/	/	[seqapipop]
#SRR957079	Apis cerana    	/	/	/	[seqapipop]
#SRR957080	Apis mellifera 	/	/	/	[seqapipop]
#SRR957081	Apis mellifera 		[alain]
#SRR957082	Apis mellifera 		[alain]
#SRR957083	Apis mellifera 		[alain]
#SRR957084	Apis mellifera 		[alain]
#SRR957085	Apis mellifera 		[alain]
#SRR957086	Apis mellifera 		[alain]
#SRR957087	Apis mellifera 		[alain]
#SRR957088	Apis mellifera 		[alain]
#SRR957089	Apis mellifera 		[alain]
#SRR957090	Apis mellifera	/	/	/	[seqapipop]
#SRR957091	Apis mellifera	/	/	/	[seqapipop]
#SRR957092	Apis mellifera	/	/	/	[seqapipop]
#SRR957093	Apis mellifera	/	/	/	[seqapipop]
#SRR957094	Apis mellifera	/	/	/	[seqapipop]
#SRR957095	Apis mellifera	/	/	/	[seqapipop]
#SRR957096	Apis mellifera	/	/	/	[seqapipop]
#SRR957097	Apis mellifera	/	/	/	[seqapipop]

#ln -s /work/dwragg/SRA/PRJNA216922/SRR957083.fastq.gz /save/seqapipop/links/SRR957083.fastq.gz


# Location of links to .fastq.gz files
IN="/home/dwragg/work/SRA/PRJNA216922"
# Read in list of files
#SAMPLELIST=(${IN}/*)
# Strip out the suffix
#tmp1=(${SAMPLELIST[@]/.fastq.gz/})
# Strip out the prefix
#tmp2=(${tmp1[@]/${IN}\//})
# Reduce to unique list
#tmp3=( $( printf "%s\n" "${tmp2[@]}" | awk 'x[$0]++ == 0' ) )


SAMPLES=('SRR957078' 'SRR957079' 'SRR957080')

# Set root paths
DUMP="/home/dwragg/work/Analysis"
PIPE="/home/dwragg/work/Pipeline"

# qsub loop (usable for map.sh, stat.sh, snps-diploid.sh)
for ID in ${SAMPLES[@]}
do
  mkdir -p ${DUMP}/logs/${ID}
  cd ${DUMP}
  qsub -q unlimitq -l mem=4G -l h_vmem=48G -pe parallel_smp 4 \
    -o ${DUMP}/logs/${ID} \
    -e ${DUMP}/logs/${ID} \
    ${PIPE}/snps-diploid.sh -i ${PIPE}/params -p "F" -q "F" -s ${ID} -p F -f ${IN} -o ${DUMP}
done



# ==============================================================================
# for Alain
# ==============================================================================
IN="/save/seqapipop/links"
DUMP="/home/vignal/work/Analysis"
PIPE="/home/dwragg/work/Pipeline"
SAMPLES=('SRR957080' 'SRR957081' 'SRR957082' 'SRR957083' 'SRR957084' 'SRR957085' 
'SRR957086' 'SRR957087' 'SRR957088' 'SRR957089')
# Scripts to use:
# map.sh
# stat.sh
# snps-diploid.sh
for ID in ${SAMPLES}
do
  mkdir -p ${DUMP}/logs/${ID}
  cd ${DUMP}
  qsub -q unlimitq -l mem=4G -l h_vmem=48G -pe parallel_smp 4 \
    -o ${DUMP}/logs/${ID} \
    -e ${DUMP}/logs/${ID} \
    ${PIPE}/map.sh -i ${PIPE}/params -p "F" -q "F" -s ${ID} -p F -f ${IN} -o ${DUMP}
done


